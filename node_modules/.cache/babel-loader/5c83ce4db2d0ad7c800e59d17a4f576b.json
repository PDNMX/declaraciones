{"ast":null,"code":"import _defineProperty from \"/home/bperdomov/PDN/declaraciones/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/bperdomov/PDN/declaraciones/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bperdomov/PDN/declaraciones/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bperdomov/PDN/declaraciones/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bperdomov/PDN/declaraciones/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bperdomov/PDN/declaraciones/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/bperdomov/PDN/declaraciones/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/bperdomov/PDN/declaraciones/src/components/Login.js\";\nimport React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport config from \"../config.json\";\nimport { Redirect } from \"react-router\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Mensaje from \"./Mensaje\"; // console.log(process.env.API);\n\nvar divstyle = {\n  marginTop: \"150px\"\n};\n\nvar styles = function styles(theme) {\n  return {\n    container: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n      // width: 200,\n      width: \"100%\"\n    },\n    dense: {\n      marginTop: 19\n    },\n    menu: {\n      width: 200\n    },\n    card: {\n      minWidth: 275\n    },\n    title: {\n      fontSize: 14\n    }\n  };\n};\n\nvar loggedIn = sessionStorage.getItem(\"logged\");\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n    };\n\n    _this.state = _defineProperty({\n      usuario: \"\",\n      clave: \"\",\n      mensaje: \"\",\n      type: \"\"\n    }, \"mensaje\", []);\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"handleClick\",\n    value: function handleClick(event) {\n      var apiBaseUrl = config.apiHost + \"users/\";\n      var self = this;\n      var payload = {\n        usuario: this.state.usuario,\n        clave: this.state.clave\n      };\n      var mensaje;\n      axios.post(apiBaseUrl + \"login\", payload).then(function (response) {\n        switch (response.data.code) {\n          case 200:\n            mensaje = {\n              mensaje: \"inicio correcto.\",\n              type: \"alert alert-success text-center\"\n            };\n            self.setState(mensaje);\n            sessionStorage.setItem(\"logged\", true);\n            window.location.reload();\n            break;\n\n          case 204:\n            mensaje = {\n              mensaje: \"El usuario y/o contrasena son incorrectos.\",\n              type: \"alert alert-danger text-center\"\n            };\n            self.setState(mensaje);\n            sessionStorage.setItem(\"logged\", false);\n            break;\n\n          case 205:\n            mensaje = {\n              mensaje: \"El usuario y/o contrasena son incorrectos.\",\n              type: \"alert alert-danger text-center\"\n            };\n            self.setState(mensaje);\n            sessionStorage.setItem(\"logged\", false);\n            break;\n\n          default:\n            mensaje = {\n              mensaje: \"hubo un error en la consulta\",\n              type: \"alert alert-danger text-center\"\n            };\n            self.setState(mensaje);\n            sessionStorage.setItem(\"logged\", false);\n        }\n\n        console.log(self.state);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n\n      if (!loggedIn) {\n        return React.createElement(Grid, {\n          style: divstyle,\n          container: true,\n          spacing: 24,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          xs: 4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }), React.createElement(Grid, {\n          item: true,\n          xs: 4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: classes.card,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(CardContent, {\n          style: {\n            textAlign: \"center\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          autoComplete: \"off\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }), React.createElement(\"img\", {\n          src: \"./images/logo_pdn.png\",\n          className: \"img-fluid\",\n          alt: \"PDN\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        })), React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          style: {\n            marginTop: \"10px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, this.state.mensaje.mensaje && React.createElement(Mensaje, {\n          mensaje: this.state.mensaje,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        })), React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, React.createElement(TextField, {\n          id: \"usuario\",\n          label: \"Usuario\",\n          className: classes.textField,\n          value: this.state.usuario,\n          onChange: this.handleChange(\"usuario\"),\n          margin: \"normal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        })), React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(TextField, {\n          id: \"clave\",\n          label: \"Contrase\\xF1a\",\n          type: \"password\",\n          className: classes.textField,\n          value: this.state.clave,\n          onChange: this.handleChange(\"clave\"),\n          margin: \"normal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }))), React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"contained\",\n          onClick: function onClick(event) {\n            return _this2.handleClick(event);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, \"Ingresar\"))), React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        })))), React.createElement(Grid, {\n          item: true,\n          xs: 4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(Redirect, {\n          to: \"/datosgenerales\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default withStyles(styles)(Login);","map":{"version":3,"sources":["/home/bperdomov/PDN/declaraciones/src/components/Login.js"],"names":["React","Component","withStyles","axios","config","Redirect","Grid","Card","CardContent","TextField","Button","Mensaje","divstyle","marginTop","styles","theme","container","display","flexWrap","textField","marginLeft","spacing","unit","marginRight","width","dense","menu","card","minWidth","title","fontSize","loggedIn","sessionStorage","getItem","Login","props","handleChange","name","event","setState","target","value","handleSubmit","preventDefault","state","usuario","clave","mensaje","type","bind","apiBaseUrl","apiHost","self","payload","post","then","response","data","code","setItem","window","location","reload","console","log","catch","error","classes","textAlign","handleClick"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nimport axios from \"axios\";\nimport config from \"../config.json\";\nimport { Redirect } from \"react-router\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Mensaje from \"./Mensaje\";\n\n// console.log(process.env.API);\n\nconst divstyle = {\n  marginTop: \"150px\"\n};\n\nconst styles = theme => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    // width: 200,\n    width: \"100%\"\n  },\n  dense: {\n    marginTop: 19\n  },\n  menu: {\n    width: 200\n  },\n  card: {\n    minWidth: 275\n  },\n  title: {\n    fontSize: 14\n  }\n});\n\nvar loggedIn = sessionStorage.getItem(\"logged\");\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      usuario: \"\",\n      clave: \"\",\n      mensaje: \"\",\n      type: \"\",\n      mensaje: []\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n  };\n\n  handleClick(event) {\n    var apiBaseUrl = config.apiHost + \"users/\";\n    var self = this;\n    var payload = {\n      usuario: this.state.usuario,\n      clave: this.state.clave\n    };\n    var mensaje;\n\n    axios\n      .post(apiBaseUrl + \"login\", payload)\n      .then(function(response) {\n        switch (response.data.code) {\n          case 200:\n            mensaje = {\n              mensaje: \"inicio correcto.\",\n              type: \"alert alert-success text-center\"\n            };\n            self.setState(mensaje:mensaje);\n            sessionStorage.setItem(\"logged\", true);\n            window.location.reload();\n            break;\n          case 204:\n            mensaje = {\n              mensaje: \"El usuario y/o contrasena son incorrectos.\",\n              type: \"alert alert-danger text-center\"\n            };\n            self.setState(mensaje:mensaje);\n            sessionStorage.setItem(\"logged\", false);\n            break;\n          case 205:\n            mensaje = {\n              mensaje: \"El usuario y/o contrasena son incorrectos.\",\n              type: \"alert alert-danger text-center\"\n            };\n            self.setState(mensaje:mensaje);\n            sessionStorage.setItem(\"logged\", false);\n            break;\n          default:\n            mensaje = {\n              mensaje: \"hubo un error en la consulta\",\n              type: \"alert alert-danger text-center\"\n            };\n            self.setState(mensaje:mensaje);\n            sessionStorage.setItem(\"logged\", false);\n        }\n        console.log(self.state);\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  }\n\n  render() {\n    const { classes } = this.props; \n    if (!loggedIn) {\n      return (\n        <Grid style={divstyle} container spacing={24}>\n          <Grid item xs={4} />\n          <Grid item xs={4}>\n            <Card className={classes.card}>\n              <CardContent style={{ textAlign: \"center\" }}>\n                <form autoComplete=\"off\">\n                  <Grid item xs={12}>\n                    <br />\n                    <img\n                      src=\"./images/logo_pdn.png\"\n                      className=\"img-fluid\"\n                      alt=\"PDN\"\n                    />\n                  </Grid>\n                  <Grid item xs={12} style={{ marginTop: \"10px\" }}>\n                    {this.state.mensaje.mensaje && (\n                      <Mensaje mensaje={this.state.mensaje} />\n                    )}\n                  </Grid>\n                  <Grid item xs={12}>\n                    <TextField\n                      id=\"usuario\"\n                      label=\"Usuario\"\n                      className={classes.textField}\n                      value={this.state.usuario}\n                      onChange={this.handleChange(\"usuario\")}\n                      margin=\"normal\"\n                    />\n                  </Grid>\n                  <Grid item xs={12}>\n                    <TextField\n                      id=\"clave\"\n                      label=\"ContraseÃ±a\"\n                      type=\"password\"\n                      className={classes.textField}\n                      value={this.state.clave}\n                      onChange={this.handleChange(\"clave\")}\n                      margin=\"normal\"\n                    />\n                  </Grid>\n                </form>\n                <Grid item xs={12}>\n                  <br />\n                  <div>\n                    <Button\n                      variant=\"contained\"\n                      onClick={event => this.handleClick(event)}\n                    >\n                      Ingresar\n                    </Button>\n                  </div>\n                </Grid>\n                <Grid item xs={12} />\n              </CardContent>\n            </Card>\n          </Grid>\n          <Grid item xs={4} />\n        </Grid>\n      );\n    } else {\n      return <Redirect to=\"/datosgenerales\" />;\n    }\n  }\n}\n\nexport default withStyles(styles)(Login);\n"]},"metadata":{},"sourceType":"module"}